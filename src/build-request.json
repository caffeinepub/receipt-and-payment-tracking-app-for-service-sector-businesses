{
  "kind": "build_request",
  "title": "Receipt and Payment Tracking App for Service-Sector Businesses",
  "priority": "normal",
  "requirements": [
    {
      "id": "REQ-1",
      "text": "Implement Internet Identity authentication and associate all receipt/payment data with the signed-in principal so each user only sees and manages their own business records.",
      "target": "both",
      "source": {
        "messageIds": [
          "msg-2"
        ],
        "quotes": [
          "I want create a receipt and payment app for service sector business"
        ]
      },
      "acceptanceCriteria": [
        "User can sign in and sign out using Internet Identity.",
        "All created/updated/listed/deleted data is scoped to the authenticated principal.",
        "Unauthenticated users cannot access receipt/payment data."
      ]
    },
    {
      "id": "REQ-2",
      "text": "Create backend data models and CRUD endpoints to manage: business profile (name, contact details), customers, service items (name, default price), receipts (receipt number, date, customer, line items, totals, status), and payments (amount, date, method, notes) linked to a receipt.",
      "target": "backend",
      "source": {
        "messageIds": [
          "msg-2"
        ],
        "quotes": [
          "I want create a receipt and payment app for service sector business"
        ]
      },
      "acceptanceCriteria": [
        "Backend supports create/read/update/delete for customers, service items, receipts, and payments.",
        "Receipts store multiple line items with quantity and unit price, and persist computed totals (subtotal, tax/fees if configured, total).",
        "Payments are linked to a receipt and can be listed per receipt.",
        "Receipt status reflects payment state at minimum: Unpaid, Partially Paid, Paid."
      ]
    },
    {
      "id": "REQ-3",
      "text": "Build core UI flows to create, view, edit, and manage receipts for a service business, including selecting a customer, adding/removing line items, and showing calculated totals in real time before saving.",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-2"
        ],
        "quotes": [
          "I want create a receipt and payment app for service sector business"
        ]
      },
      "acceptanceCriteria": [
        "User can create a new receipt from the UI, add multiple line items, and save it.",
        "Totals update immediately as line items change (quantity/price).",
        "User can view a receipt detail page with items, totals, customer info, and status."
      ]
    },
    {
      "id": "REQ-4",
      "text": "Add payment recording UI for receipts (no external payment processing): allow users to add one or more payments to a receipt, choose a payment method (e.g., Cash, Card, Bank Transfer, Other), and see remaining balance update.",
      "target": "both",
      "source": {
        "messageIds": [
          "msg-2"
        ],
        "quotes": [
          "receipt and payment app"
        ]
      },
      "acceptanceCriteria": [
        "User can add a payment to a receipt and see the receipt status/balance update accordingly.",
        "Multiple payments per receipt are supported.",
        "User can delete an incorrect payment entry and the balance/status recalculates."
      ]
    },
    {
      "id": "REQ-5",
      "text": "Provide receipt list and search/filter views suitable for service-sector operations: list receipts by date, status, customer, and allow quick filtering (e.g., Unpaid/Paid).",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-2"
        ],
        "quotes": [
          "receipt and payment app for service sector business"
        ]
      },
      "acceptanceCriteria": [
        "Receipts list page shows key columns (receipt number, date, customer, total, status, balance).",
        "User can filter by status and search by receipt number or customer name.",
        "Selecting a receipt opens the receipt detail view."
      ]
    },
    {
      "id": "REQ-6",
      "text": "Add a printable receipt view (browser print) with a clean receipt layout including business header, receipt number/date, customer, line items, totals, and payment summary.",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-2"
        ],
        "quotes": [
          "receipt"
        ]
      },
      "acceptanceCriteria": [
        "Receipt detail includes a Print action that opens/uses a print-friendly layout.",
        "Printed view fits on typical receipt/invoice page sizes and remains readable.",
        "Printed view includes business name and contact fields when set."
      ]
    },
    {
      "id": "REQ-7",
      "text": "Establish a coherent, distinctive visual theme for the app (colors, typography, spacing, components) appropriate for professional service businesses; apply it consistently across navigation, lists, forms, and receipt detail/print screens (avoid default blue/purple styling).",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-2"
        ],
        "quotes": [
          "receipt and payment app for service sector business"
        ]
      },
      "acceptanceCriteria": [
        "App uses a consistent theme across all pages (navigation, buttons, forms, tables/cards).",
        "Color palette is not the default blue/purple aesthetic.",
        "UI looks professional and business-oriented (legible typography, clear hierarchy)."
      ]
    },
    {
      "id": "REQ-8",
      "text": "Generate and include required static image assets, store them in frontend/public/assets/generated, and render them in the UI (e.g., on the sign-in/landing and empty states) without routing images through the backend.",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-2"
        ],
        "quotes": [
          "receipt and payment app for service sector business"
        ]
      },
      "acceptanceCriteria": [
        "All required images exist under frontend/public/assets/generated with the specified filenames.",
        "At least one generated image is displayed in the UI (landing and/or empty state).",
        "No backend endpoints are used to serve these static images."
      ]
    }
  ],
  "constraints": [
    "Backend must remain a single Motoko actor (all logic in backend/main.mo).",
    "Do not modify files under frontend/src/components/ui or any frontend immutablePaths; compose existing UI components instead.",
    "Do not add third-party authentication providers; only Internet Identity is allowed.",
    "Do not add external databases or non-Motoko backend services."
  ],
  "nonGoals": [
    "Integrating real payment processing gateways (e.g., Stripe checkout flows) unless explicitly requested later.",
    "Real-time multi-user collaboration or chat.",
    "Inventory management beyond basic service items.",
    "Tax jurisdiction rules/compliance automation beyond simple configurable fields."
  ],
  "imageRequirements": {
    "required": [
      "Minimal professional app logo mark, receipt + coin motif, flat vector style (app-logo.dim_512x512.png)",
      "Clean illustration of a service professional issuing a receipt at a counter, warm neutral palette, flat vector (hero-illustration.dim_1600x900.png)",
      "Small set of 3 monochrome line icons: receipt, payment, customer, consistent stroke (icons-set.dim_384x128.png)"
    ],
    "edits": []
  },
  "userProfileUpdate": {
    "goalsToAdd": [
      "Build a receipt and payment tracking app for service-sector businesses"
    ],
    "goalsToRemove": [],
    "preferencesToAdd": [
      "Use English for user-facing text"
    ],
    "preferencesToRemove": [],
    "miscToAdd": [],
    "miscToRemove": [],
    "fieldsToSet": {},
    "fieldsToDelete": []
  }
}